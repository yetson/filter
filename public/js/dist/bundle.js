(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var TextEffect = require("./textEffect");

var TYPE_GLOW = {
  none: {},
  blue_5: { color: "#267DE6", size: 5, opacity: "1" },
  blue_8: { color: "#267DE6", size: 8, opacity: "1" },
  blue_11: { color: "#267DE6", size: 11, opacity: "1" },
  blue_18: { color: "#267DE6", size: 18, opacity: "1" },
  red_5: { color: "#EB2722", size: 5, opacity: "1" },
  red_8: { color: "#EB2722", size: 8, opacity: "1" },
  red_11: { color: "#EB2722", size: 11, opacity: "1" },
  red_18: { color: "#EB2722", size: 18, opacity: "1" },
  olive_5: { color: "#A8E034", size: 5, opacity: "1" },
  olive_8: { color: "#A8E034", size: 8, opacity: "1" },
  olive_11: { color: "#A8E034", size: 11, opacity: "1" },
  olive_18: { color: "#A8E034", size: 18, opacity: "1" },
  purple_5: { color: "#7E4DB9", size: 5, opacity: "1" },
  purple_8: { color: "#7E4DB9", size: 8, opacity: "1" },
  purple_11: { color: "#7E4DB9", size: 11, opacity: "1" },
  purple_18: { color: "#7E4DB9", size: 18, opacity: "1" },
  green_5: { color: "#1DC7F4", size: 5, opacity: "1" },
  green_8: { color: "#1DC7F4", size: 8, opacity: "1" },
  green_11: { color: "#1DC7F4", size: 11, opacity: "1" },
  green_18: { color: "#1DC7F4", size: 18, opacity: "1" },
  yellow_5: { color: "#FF9004", size: 5, opacity: "1" },
  yellow_8: { color: "#FF9004", size: 8, opacity: "1" },
  yellow_11: { color: "#FF9004", size: 11, opacity: "1" },
  yellow_18: { color: "#FF9004", size: 18, opacity: "1" }
};

var TYPE_SHADOW = {
  none: {},
  rightDown: { color: "#000000", opacity: "0.5", blur: "4", distance: "6" }
};

//leftUp: {color: "#000000", opacity: "0.5", size: "1", blur: "4", angle: "0", distance: "6"}
var Box = React.createClass({
  displayName: "Box",

  getInitialState: function getInitialState() {
    return {
      textInfo: {
        text: "text",
        fill: "#000000",
        fontSize: "80"
      },
      glowInfo: {},
      shadowInfo: {}
    };
  },
  change: function change(tarFormId, opt) {
    var glowOpt;
    if (tarFormId === "fontForm") {
      opt.text ? this.state.textInfo.text = opt.text : null;
      opt.size ? this.state.textInfo.fontSize = opt.size : null;
      opt.color ? this.state.textInfo.fill = opt.color : null;
    } else if (tarFormId === "glowForm") {
      if (opt['glowSelect']) {
        //if(opt['glowSelect'] === "0")return;
        this.state.glowInfo = _.clone(TYPE_GLOW[opt['glowSelect']]);
      } else {
        opt.color ? this.state.glowInfo.color = opt.color : null;
        opt.size ? this.state.glowInfo.size = opt.size : null;
        opt.opacity ? this.state.glowInfo.opacity = opt.opacity : null;
      }
      TextEffect.glow(ReactDOM.findDOMNode(this.refs.textBox).querySelector("text:last-child"), this.state.glowInfo);
    } else if (tarFormId === "shadowForm") {
      if (opt['shadowSelect']) {
        //if(opt['shadowSelect'] === "0")return;
        this.state.shadowInfo = _.clone(TYPE_SHADOW[opt['shadowSelect']]);
      } else {
        opt.color ? this.state.shadowInfo.color = opt.color : null;
        opt.opacity ? this.state.shadowInfo.opacity = opt.opacity : null;
        opt.size ? this.state.shadowInfo.size = opt.size : null;
        opt.blur ? this.state.shadowInfo.blur = opt.blur : null;
        opt.angle ? this.state.shadowInfo.angle = opt.angle : null;
        opt.distance ? this.state.shadowInfo.distance = opt.distance : null;
      }
      TextEffect.shadow(ReactDOM.findDOMNode(this.refs.textBox).querySelector("text:last-child"), this.state.shadowInfo);
    }
    this.forceUpdate();
  },
  render: function render() {
    return React.createElement(
      "div",
      null,
      React.createElement(TextBox, { ref: "textBox", style: this.state, textInfo: this.state.textInfo }),
      React.createElement(
        "div",
        { className: "display" },
        React.createElement(FormBox, { id: "fontForm", displayName: "字体", option: this.state.textInfo, onChange: this.change }),
        React.createElement(FormBox, { id: "glowForm", displayName: "发光", option: this.state.glowInfo, onChange: this.change }),
        React.createElement(FormBox, { id: "shadowForm", displayName: "阴影", option: this.state.shadowInfo, onChange: this.change })
      )
    );
  }
});

var TextBox = React.createClass({
  displayName: "TextBox",

  render: function render() {
    return React.createElement(
      "svg",
      { ref: "textArea", className: "show", style: { fontSize: this.props.textInfo.fontSize } },
      React.createElement(
        "g",
        null,
        React.createElement(
          "text",
          { x: "10", y: "100", fill: this.props.textInfo.fill },
          this.props.textInfo.text
        )
      )
    );
  }
});

var FormBox = React.createClass({
  displayName: "FormBox",

  getInitialState: function getInitialState() {
    return this.props.option;
  },
  handleChange: function handleChange(e) {
    e.preventDefault();
    var inputDom = e.currentTarget;
    var value = inputDom.value;
    this.state[inputDom.id] = value;
    this.forceUpdate();

    var obj = {};
    obj[inputDom.id] = value;
    this.props.onChange(this.props.id, obj);
  },
  render: function render() {
    var ps = Object.keys(this.props.option).map((function (k, index) {
      var type = k === "color" || k === "fill" ? "color" : k === "text" ? "text" : "range";
      var min = 1;
      var max = 100;
      var step = 1;

      if (k === "opacity") {
        min = 0;
        max = 1;
        step = 0.1;
      } else if (k === "angle") {
        min = 0;
        max = 360;
      } else if (k === "size" && this.props.id === "glowForm") {
        min = 1;
        max = 20;
      } else if (k === "distance" && this.props.id === "shadowForm") {
        min = -10;
        max = 10;
      } else if (k === "blur" && this.props.id === "shadowForm") {
        min = 0;
        max = 10;
      }
      return React.createElement(
        "p",
        { key: index },
        React.createElement(
          "label",
          null,
          k,
          " "
        ),
        React.createElement("input", { id: k, type: type, min: min, max: max, step: step, value: this.props.option[k], onInput: this.handleChange, onChange: this.handleChange }),
        React.createElement(
          "label",
          { name: "result" },
          " ",
          this.props.option[k]
        )
      );
    }).bind(this));
    var glowTypeSelect = Object.keys(TYPE_GLOW).map(function (t, index) {
      return React.createElement(
        "option",
        { key: index, value: t },
        t
      );
    });
    var shadowTypeSelect = Object.keys(TYPE_SHADOW).map(function (t, index) {
      return React.createElement(
        "option",
        { key: index, value: t },
        t
      );
    });
    return React.createElement(
      "form",
      null,
      React.createElement(
        "h2",
        null,
        this.props.displayName
      ),
      this.props.displayName === "发光" ? React.createElement(
        "select",
        { id: "glowSelect", onChange: this.handleChange },
        glowTypeSelect
      ) : this.props.displayName === "阴影" ? React.createElement(
        "select",
        { id: "shadowSelect", onChange: this.handleChange },
        shadowTypeSelect
      ) : null,
      ps
    );
  }
});

ReactDOM.render(React.createElement(Box, null), document.getElementById("content"));

},{"./textEffect":2}],2:[function(require,module,exports){
"use strict";

var SVG_NS = "http://www.w3.org/2000/svg";
var TextEffect = {
    glow: function glow(textSvg, opt) {
        [].forEach.call(textSvg.parentNode.querySelectorAll('.filter_glow_text,.filter_glow_defs'), function (f) {
            f.remove();
        });
        if (Object.keys(opt).length === 0) return;
        var color = opt.color || "#000",
            opacity = opt.opacity || "1",
            stdDeviation = opt.size || "4",
            filterText = textSvg.cloneNode(true),

        //filterText = React.cloneElement(textSvg),
        id = Math.random().toFixed(10).slice(-10),
            defs = document.createElementNS(SVG_NS, "defs");
        defs.setAttribute("id", "defs_glow_" + id);
        defs.setAttribute("class", "filter_glow_defs");
        defs.innerHTML = this.getGlowFilter("filter_glow_" + id, stdDeviation);
        filterText.removeAttribute("data-reactid");
        filterText.setAttribute("filter", "url(#filter_glow_" + id + ")");
        filterText.setAttribute("fill", color);
        filterText.setAttribute("opacity", opacity);
        filterText.setAttribute("class", "filter_glow_text");
        textSvg.parentNode.insertBefore(defs, textSvg);
        textSvg.parentNode.insertBefore(filterText, textSvg);
    },
    getGlowFilter: function getGlowFilter(id, stdDeviation) {
        return "\n            <filter id=\"" + id + "\" x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\">\n                <feGaussianBlur stdDeviation=\"" + stdDeviation + "\" result=\"glow\"/>\n                <feMerge>\n                    <feMergeNode in=\"glow\"/>\n                    <feMergeNode in=\"glow\"/>\n                    <feMergeNode in=\"glow\"/>\n                </feMerge>\n            </filter>";
    },
    shadow: function shadow(textSvg, opt) {
        [].forEach.call(textSvg.parentNode.querySelectorAll('.filter_shadow_text,.filter_shadow_defs'), function (f) {
            f.remove();
        });
        if (Object.keys(opt).length === 0) return;
        var color = opt.color || "#000",
            opacity = opt.opacity || 1,
            stdDeviation = opt.blur || 4,
            distance = opt.distance || 0,
            angle = opt.angle || 0,
            filterText = textSvg.cloneNode(true),
            id = Math.random().toFixed(10).slice(-10),
            defs = document.createElementNS(SVG_NS, "defs");
        defs.setAttribute("id", "defs_shadow_" + id);
        defs.setAttribute("class", "filter_shadow_defs");
        defs.innerHTML = this.getShadowFilter("filter_shadow_" + id, stdDeviation, distance);
        filterText.setAttribute("filter", "url(#filter_shadow_" + id + ")");
        filterText.setAttribute("fill", color);
        filterText.setAttribute("opacity", opacity);
        filterText.setAttribute("class", "filter_shadow_text");
        textSvg.parentNode.insertBefore(defs, textSvg);
        textSvg.parentNode.insertBefore(filterText, textSvg);
    },
    getShadowFilter: function getShadowFilter(id, stdDeviation, distance) {
        return "\n            <filter id=\"" + id + "\" x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\">\n                <feGaussianBlur stdDeviation=\"" + stdDeviation + "\" result=\"shadow\"/>\n                <feOffset dx=\"" + distance + "\" dy=\"" + distance + "\"/>\n            </filter>";
    }
};

module.exports = TextEffect;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMveWljaGVuZy93b3Jrc3BhY2UvZmlsdGVyL3B1YmxpYy9qcy9zcmMvbWFpbi5qcyIsIi9Vc2Vycy95aWNoZW5nL3dvcmtzcGFjZS9maWx0ZXIvcHVibGljL2pzL3NyYy90ZXh0RWZmZWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7O0FBRXpDLElBQUksU0FBUyxHQUFHO0FBQ2QsTUFBSSxFQUFFLEVBQUU7QUFDUixRQUFNLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNoRCxRQUFNLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNoRCxTQUFPLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNsRCxTQUFPLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNsRCxPQUFLLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUMvQyxPQUFLLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUMvQyxRQUFNLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNqRCxRQUFNLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNqRCxTQUFPLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNqRCxTQUFPLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNqRCxVQUFRLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNuRCxVQUFRLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNuRCxVQUFRLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNsRCxVQUFRLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNsRCxXQUFTLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNwRCxXQUFTLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNwRCxTQUFPLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNqRCxTQUFPLEVBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBQztBQUNqRCxVQUFRLEVBQUMsRUFB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ZSxFQUFFLHlCQUFTLEVBQUUsRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFDO0FBQ2pELCtDQUNrQixFQUFFLGlIQUNvQixZQUFZLCtEQUM1QixRQUFRLGdCQUFTLFFBQVEsaUNBQ2xDO0tBQ2xCO0NBQ0osQ0FBQTs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgVGV4dEVmZmVjdCA9IHJlcXVpcmUoXCIuL3RleHRFZmZlY3RcIik7XG5cbnZhciBUWVBFX0dMT1cgPSB7XG4gIG5vbmU6IHt9LFxuICBibHVlXzU6e2NvbG9yOiBcIiMyNjdERTZcIiwgc2l6ZTogNSwgb3BhY2l0eTogXCIxXCJ9LFxuICBibHVlXzg6e2NvbG9yOiBcIiMyNjdERTZcIiwgc2l6ZTogOCwgb3BhY2l0eTogXCIxXCJ9LFxuICBibHVlXzExOntjb2xvcjogXCIjMjY3REU2XCIsIHNpemU6IDExLCBvcGFjaXR5OiBcIjFcIn0sXG4gIGJsdWVfMTg6e2NvbG9yOiBcIiMyNjdERTZcIiwgc2l6ZTogMTgsIG9wYWNpdHk6IFwiMVwifSxcbiAgcmVkXzU6e2NvbG9yOiBcIiNFQjI3MjJcIiwgc2l6ZTogNSwgb3BhY2l0eTogXCIxXCJ9LFxuICByZWRfODp7Y29sb3I6IFwiI0VCMjcyMlwiLCBzaXplOiA4LCBvcGFjaXR5OiBcIjFcIn0sXG4gIHJlZF8xMTp7Y29sb3I6IFwiI0VCMjcyMlwiLCBzaXplOiAxMSwgb3BhY2l0eTogXCIxXCJ9LFxuICByZWRfMTg6e2NvbG9yOiBcIiNFQjI3MjJcIiwgc2l6ZTogMTgsIG9wYWNpdHk6IFwiMVwifSxcbiAgb2xpdmVfNTp7Y29sb3I6IFwiI0E4RTAzNFwiLCBzaXplOiA1LCBvcGFjaXR5OiBcIjFcIn0sXG4gIG9saXZlXzg6e2NvbG9yOiBcIiNBOEUwMzRcIiwgc2l6ZTogOCwgb3BhY2l0eTogXCIxXCJ9LFxuICBvbGl2ZV8xMTp7Y29sb3I6IFwiI0E4RTAzNFwiLCBzaXplOiAxMSwgb3BhY2l0eTogXCIxXCJ9LFxuICBvbGl2ZV8xODp7Y29sb3I6IFwiI0E4RTAzNFwiLCBzaXplOiAxOCwgb3BhY2l0eTogXCIxXCJ9LFxuICBwdXJwbGVfNTp7Y29sb3I6IFwiIzdFNERCOVwiLCBzaXplOiA1LCBvcGFjaXR5OiBcIjFcIn0sXG4gIHB1cnBsZV84Ontjb2xvcjogXCIjN0U0REI5XCIsIHNpemU6IDgsIG9wYWNpdHk6IFwiMVwifSxcbiAgcHVycGxlXzExOntjb2xvcjogXCIjN0U0REI5XCIsIHNpemU6IDExLCBvcGFjaXR5OiBcIjFcIn0sXG4gIHB1cnBsZV8xODp7Y29sb3I6IFwiIzdFNERCOVwiLCBzaXplOiAxOCwgb3BhY2l0eTogXCIxXCJ9LFxuICBncmVlbl81Ontjb2xvcjogXCIjMURDN0Y0XCIsIHNpemU6IDUsIG9wYWNpdHk6IFwiMVwifSxcbiAgZ3JlZW5fODp7Y29sb3I6IFwiIzFEQzdGNFwiLCBzaXplOiA4LCBvcGFjaXR5OiBcIjFcIn0sXG4gIGdyZWVuXzExOntjb2xvcjogXCIjMURDN0Y0XCIsIHNpemU6IDExLCBvcGFjaXR5OiBcIjFcIn0sXG4gIGdyZWVuXzE4Ontjb2xvcjogXCIjMURDN0Y0XCIsIHNpemU6IDE4LCBvcGFjaXR5OiBcIjFcIn0sXG4gIHllbGxvd181Ontjb2xvcjogXCIjRkY5MDA0XCIsIHNpemU6IDUsIG9wYWNpdHk6IFwiMVwifSxcbiAgeWVsbG93Xzg6e2NvbG9yOiBcIiNGRjkwMDRcIiwgc2l6ZTogOCwgb3BhY2l0eTogXCIxXCJ9LFxuICB5ZWxsb3dfMTE6e2NvbG9yOiBcIiNGRjkwMDRcIiwgc2l6ZTogMTEsIG9wYWNpdHk6IFwiMVwifSxcbiAgeWVsbG93XzE4Ontjb2xvcjogXCIjRkY5MDA0XCIsIHNpemU6IDE4LCBvcGFjaXR5OiBcIjFcIn1cbn07XG5cbnZhciBUWVBFX1NIQURPVyA9IHtcbiAgbm9uZTp7fSxcbiAgcmlnaHREb3duOiB7Y29sb3I6IFwiIzAwMDAwMFwiLCBvcGFjaXR5OiBcIjAuNVwiLCBibHVyOiBcIjRcIiwgZGlzdGFuY2U6IFwiNlwifSxcbiAgLy9sZWZ0VXA6IHtjb2xvcjogXCIjMDAwMDAwXCIsIG9wYWNpdHk6IFwiMC41XCIsIHNpemU6IFwiMVwiLCBibHVyOiBcIjRcIiwgYW5nbGU6IFwiMFwiLCBkaXN0YW5jZTogXCI2XCJ9XG59O1xuXG52YXIgQm94ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHRJbmZvOiB7XG4gICAgICAgIHRleHQ6IFwidGV4dFwiLFxuICAgICAgICBmaWxsOiBcIiMwMDAwMDBcIixcbiAgICAgICAgZm9udFNpemU6IFwiODBcIlxuICAgICAgfSxcbiAgICAgIGdsb3dJbmZvOiB7fSxcbiAgICAgIHNoYWRvd0luZm86IHt9XG4gICAgfTtcbiAgfSxcbiAgY2hhbmdlOiBmdW5jdGlvbih0YXJGb3JtSWQsIG9wdCl7XG4gICAgdmFyIGdsb3dPcHQ7XG4gICAgaWYodGFyRm9ybUlkID09PSBcImZvbnRGb3JtXCIpe1xuICAgICAgb3B0LnRleHQgPyB0aGlzLnN0YXRlLnRleHRJbmZvLnRleHQgPSBvcHQudGV4dCA6IG51bGw7XG4gICAgICBvcHQuc2l6ZSA/IHRoaXMuc3RhdGUudGV4dEluZm8uZm9udFNpemUgPSBvcHQuc2l6ZSA6IG51bGw7XG4gICAgICBvcHQuY29sb3IgPyB0aGlzLnN0YXRlLnRleHRJbmZvLmZpbGwgPSBvcHQuY29sb3IgOiBudWxsO1xuICAgIH1lbHNlIGlmKHRhckZvcm1JZCA9PT0gXCJnbG93Rm9ybVwiKXtcbiAgICAgIGlmKG9wdFsnZ2xvd1NlbGVjdCddKXtcbiAgICAgICAgLy9pZihvcHRbJ2dsb3dTZWxlY3QnXSA9PT0gXCIwXCIpcmV0dXJuO1xuICAgICAgICB0aGlzLnN0YXRlLmdsb3dJbmZvID0gXy5jbG9uZShUWVBFX0dMT1dbb3B0WydnbG93U2VsZWN0J11dKTtcbiAgICAgIH1lbHNle1xuICAgICAgICBvcHQuY29sb3IgPyB0aGlzLnN0YXRlLmdsb3dJbmZvLmNvbG9yID0gb3B0LmNvbG9yIDogbnVsbDtcbiAgICAgICAgb3B0LnNpemUgPyB0aGlzLnN0YXRlLmdsb3dJbmZvLnNpemUgPSBvcHQuc2l6ZSA6IG51bGw7XG4gICAgICAgIG9wdC5vcGFjaXR5ID8gdGhpcy5zdGF0ZS5nbG93SW5mby5vcGFjaXR5ID0gb3B0Lm9wYWNpdHkgOiBudWxsO1xuICAgICAgfVxuICAgICAgVGV4dEVmZmVjdC5nbG93KFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmcy50ZXh0Qm94KS5xdWVyeVNlbGVjdG9yKFwidGV4dDpsYXN0LWNoaWxkXCIpLCB0aGlzLnN0YXRlLmdsb3dJbmZvKTtcbiAgICB9ZWxzZSBpZih0YXJGb3JtSWQgPT09IFwic2hhZG93Rm9ybVwiKXtcbiAgICAgIGlmKG9wdFsnc2hhZG93U2VsZWN0J10pe1xuICAgICAgICAvL2lmKG9wdFsnc2hhZG93U2VsZWN0J10gPT09IFwiMFwiKXJldHVybjtcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFkb3dJbmZvID0gXy5jbG9uZShUWVBFX1NIQURPV1tvcHRbJ3NoYWRvd1NlbGVjdCddXSk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgb3B0LmNvbG9yID8gdGhpcy5zdGF0ZS5zaGFkb3dJbmZvLmNvbG9yID0gb3B0LmNvbG9yIDogbnVsbDtcbiAgICAgICAgb3B0Lm9wYWNpdHkgPyB0aGlzLnN0YXRlLnNoYWRvd0luZm8ub3BhY2l0eSA9IG9wdC5vcGFjaXR5IDogbnVsbDtcbiAgICAgICAgb3B0LnNpemUgPyB0aGlzLnN0YXRlLnNoYWRvd0luZm8uc2l6ZSA9IG9wdC5zaXplIDogbnVsbDtcbiAgICAgICAgb3B0LmJsdXIgPyB0aGlzLnN0YXRlLnNoYWRvd0luZm8uYmx1ciA9IG9wdC5ibHVyIDogbnVsbDtcbiAgICAgICAgb3B0LmFuZ2xlID8gdGhpcy5zdGF0ZS5zaGFkb3dJbmZvLmFuZ2xlID0gb3B0LmFuZ2xlIDogbnVsbDtcbiAgICAgICAgb3B0LmRpc3RhbmNlID8gdGhpcy5zdGF0ZS5zaGFkb3dJbmZvLmRpc3RhbmNlID0gb3B0LmRpc3RhbmNlIDogbnVsbDtcbiAgICAgIH1cbiAgICAgIFRleHRFZmZlY3Quc2hhZG93KFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmcy50ZXh0Qm94KS5xdWVyeVNlbGVjdG9yKFwidGV4dDpsYXN0LWNoaWxkXCIpLCB0aGlzLnN0YXRlLnNoYWRvd0luZm8pO1xuICAgIH1cbiAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPFRleHRCb3ggcmVmPVwidGV4dEJveFwiIHN0eWxlPXt0aGlzLnN0YXRlfSB0ZXh0SW5mbz17dGhpcy5zdGF0ZS50ZXh0SW5mb30vPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpc3BsYXlcIj5cbiAgICAgICAgICA8Rm9ybUJveCBpZD1cImZvbnRGb3JtXCIgZGlzcGxheU5hbWU9XCLlrZfkvZNcIiBvcHRpb249e3RoaXMuc3RhdGUudGV4dEluZm99IG9uQ2hhbmdlPXt0aGlzLmNoYW5nZX0vPlxuICAgICAgICAgIDxGb3JtQm94IGlkPVwiZ2xvd0Zvcm1cIiBkaXNwbGF5TmFtZT1cIuWPkeWFiVwiIG9wdGlvbj17dGhpcy5zdGF0ZS5nbG93SW5mb30gb25DaGFuZ2U9e3RoaXMuY2hhbmdlfS8+XG4gICAgICAgICAgPEZvcm1Cb3ggaWQ9XCJzaGFkb3dGb3JtXCIgZGlzcGxheU5hbWU9XCLpmLTlvbFcIiBvcHRpb249e3RoaXMuc3RhdGUuc2hhZG93SW5mb30gb25DaGFuZ2U9e3RoaXMuY2hhbmdlfS8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBUZXh0Qm94ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICByZW5kZXI6IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPHN2ZyByZWY9XCJ0ZXh0QXJlYVwiIGNsYXNzTmFtZT1cInNob3dcIiBzdHlsZT17e2ZvbnRTaXplOnRoaXMucHJvcHMudGV4dEluZm8uZm9udFNpemV9fT5cbiAgICAgICAgICA8Zz5cbiAgICAgICAgICAgIDx0ZXh0IHg9XCIxMFwiIHk9XCIxMDBcIiBmaWxsPXt0aGlzLnByb3BzLnRleHRJbmZvLmZpbGx9Pnt0aGlzLnByb3BzLnRleHRJbmZvLnRleHR9PC90ZXh0PlxuICAgICAgICAgIDwvZz5cbiAgICAgICAgPC9zdmc+XG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBGb3JtQm94ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMub3B0aW9uO1xuICB9LFxuICBoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uKGUpe1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgaW5wdXREb20gPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgdmFyIHZhbHVlID0gaW5wdXREb20udmFsdWU7XG4gICAgdGhpcy5zdGF0ZVtpbnB1dERvbS5pZF0gPSB2YWx1ZTtcbiAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG5cbiAgICB2YXIgb2JqID0ge307XG4gICAgb2JqW2lucHV0RG9tLmlkXSA9IHZhbHVlO1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5wcm9wcy5pZCwgb2JqKTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIHZhciBwcyA9IE9iamVjdC5rZXlzKHRoaXMucHJvcHMub3B0aW9uKS5tYXAoZnVuY3Rpb24oaywgaW5kZXgpe1xuICAgICAgdmFyIHR5cGUgPSBrID09PSBcImNvbG9yXCIgfHwgayA9PT0gXCJmaWxsXCIgPyBcImNvbG9yXCIgOiAoaz09PVwidGV4dFwiID8gXCJ0ZXh0XCIgOiBcInJhbmdlXCIpO1xuICAgICAgdmFyIFttaW4sIG1heCwgc3RlcF0gPSBbMSwgMTAwLCAxXTtcbiAgICAgIGlmKGsgPT09IFwib3BhY2l0eVwiKXtcbiAgICAgICAgbWluID0gMDtcbiAgICAgICAgbWF4ID0gMTtcbiAgICAgICAgc3RlcCA9IDAuMTtcbiAgICAgIH1lbHNlIGlmKGsgPT09IFwiYW5nbGVcIil7XG4gICAgICAgIG1pbiA9IDA7XG4gICAgICAgIG1heCA9IDM2MDtcbiAgICAgIH1lbHNlIGlmKGsgPT09IFwic2l6ZVwiICYmIHRoaXMucHJvcHMuaWQgPT09IFwiZ2xvd0Zvcm1cIil7XG4gICAgICAgIG1pbiA9IDE7XG4gICAgICAgIG1heCA9IDIwO1xuICAgICAgfWVsc2UgaWYoayA9PT0gXCJkaXN0YW5jZVwiICYmIHRoaXMucHJvcHMuaWQgPT09IFwic2hhZG93Rm9ybVwiKXtcbiAgICAgICAgbWluID0gLTEwO1xuICAgICAgICBtYXggPSAxMDtcbiAgICAgIH1lbHNlIGlmKGsgPT09IFwiYmx1clwiICYmIHRoaXMucHJvcHMuaWQgPT09IFwic2hhZG93Rm9ybVwiKXtcbiAgICAgICAgbWluID0gMDtcbiAgICAgICAgbWF4ID0gMTA7XG4gICAgICB9XG4gICAgICByZXR1cm4oXG4gICAgICAgIDxwIGtleT17aW5kZXh9PlxuICAgICAgICAgIDxsYWJlbD57a30mbmJzcDs8L2xhYmVsPlxuICAgICAgICAgIDxpbnB1dCBpZD17a30gdHlwZT17dHlwZX0gbWluPXttaW59IG1heD17bWF4fSBzdGVwPXtzdGVwfSB2YWx1ZT17dGhpcy5wcm9wcy5vcHRpb25ba119IG9uSW5wdXQ9e3RoaXMuaGFuZGxlQ2hhbmdlfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9IC8+XG4gICAgICAgICAgPGxhYmVsIG5hbWU9XCJyZXN1bHRcIj4mbmJzcDt7dGhpcy5wcm9wcy5vcHRpb25ba119PC9sYWJlbD5cbiAgICAgICAgPC9wPlxuICAgICAgKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICAgIHZhciBnbG93VHlwZVNlbGVjdCA9IE9iamVjdC5rZXlzKFRZUEVfR0xPVykubWFwKGZ1bmN0aW9uKHQsIGluZGV4KXtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxvcHRpb24ga2V5PXtpbmRleH0gdmFsdWU9e3R9Pnt0fTwvb3B0aW9uPlxuICAgICAgKTtcbiAgICB9KTtcbiAgICB2YXIgc2hhZG93VHlwZVNlbGVjdCA9IE9iamVjdC5rZXlzKFRZUEVfU0hBRE9XKS5tYXAoZnVuY3Rpb24odCwgaW5kZXgpe1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPG9wdGlvbiBrZXk9e2luZGV4fSB2YWx1ZT17dH0+e3R9PC9vcHRpb24+XG4gICAgICApO1xuICAgIH0pO1xuICAgIHJldHVybiAoXG4gICAgICA8Zm9ybT5cbiAgICAgICAgPGgyPnt0aGlzLnByb3BzLmRpc3BsYXlOYW1lfTwvaDI+XG4gICAgICAgIHt0aGlzLnByb3BzLmRpc3BsYXlOYW1lID09PSBcIuWPkeWFiVwiID8gKDxzZWxlY3QgaWQ9XCJnbG93U2VsZWN0XCIgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfT57Z2xvd1R5cGVTZWxlY3R9PC9zZWxlY3Q+KSA6ICh0aGlzLnByb3BzLmRpc3BsYXlOYW1lID09PSBcIumYtOW9sVwiID8gKDxzZWxlY3QgaWQ9XCJzaGFkb3dTZWxlY3RcIiBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9PntzaGFkb3dUeXBlU2VsZWN0fTwvc2VsZWN0PikgOiBudWxsKX1cbiAgICAgICAge3BzfVxuICAgICAgPC9mb3JtPlxuICAgICk7XG4gIH1cbn0pO1xuXG5SZWFjdERPTS5yZW5kZXIoXG4gIDxCb3ggLz4sXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKVxuKTsiLCJ2YXIgU1ZHX05TID0gXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiO1xyXG52YXIgVGV4dEVmZmVjdCA9IHtcclxuICAgIGdsb3c6IGZ1bmN0aW9uKHRleHRTdmcsIG9wdCl7XHJcbiAgICAgICAgW10uZm9yRWFjaC5jYWxsKHRleHRTdmcucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyX2dsb3dfdGV4dCwuZmlsdGVyX2dsb3dfZGVmcycpLCBmdW5jdGlvbihmKXtcclxuICAgICAgICAgICAgZi5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZihPYmplY3Qua2V5cyhvcHQpLmxlbmd0aCA9PT0gMClyZXR1cm47XHJcbiAgICAgICAgdmFyIGNvbG9yID0gb3B0LmNvbG9yIHx8IFwiIzAwMFwiLFxyXG4gICAgICAgICAgICBvcGFjaXR5ID0gb3B0Lm9wYWNpdHkgfHwgXCIxXCIsXHJcbiAgICAgICAgICAgIHN0ZERldmlhdGlvbiA9IG9wdC5zaXplIHx8IFwiNFwiLFxyXG4gICAgICAgICAgICBmaWx0ZXJUZXh0ID0gdGV4dFN2Zy5jbG9uZU5vZGUodHJ1ZSksXHJcbiAgICAgICAgICAgIC8vZmlsdGVyVGV4dCA9IFJlYWN0LmNsb25lRWxlbWVudCh0ZXh0U3ZnKSxcclxuICAgICAgICAgICAgaWQgPSBNYXRoLnJhbmRvbSgpLnRvRml4ZWQoMTApLnNsaWNlKC0xMCksXHJcbiAgICAgICAgICAgIGRlZnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoU1ZHX05TLCBcImRlZnNcIik7XHJcbiAgICAgICAgZGVmcy5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgZGVmc19nbG93XyR7aWR9YCk7XHJcbiAgICAgICAgZGVmcy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImZpbHRlcl9nbG93X2RlZnNcIik7XHJcbiAgICAgICAgZGVmcy5pbm5lckhUTUwgPSB0aGlzLmdldEdsb3dGaWx0ZXIoYGZpbHRlcl9nbG93XyR7aWR9YCwgc3RkRGV2aWF0aW9uKTtcclxuICAgICAgICBmaWx0ZXJUZXh0LnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtcmVhY3RpZFwiKTtcclxuICAgICAgICBmaWx0ZXJUZXh0LnNldEF0dHJpYnV0ZShcImZpbHRlclwiLCBgdXJsKCNmaWx0ZXJfZ2xvd18ke2lkfSlgKTtcclxuICAgICAgICBmaWx0ZXJUZXh0LnNldEF0dHJpYnV0ZShcImZpbGxcIiwgY29sb3IpO1xyXG4gICAgICAgIGZpbHRlclRleHQuc2V0QXR0cmlidXRlKFwib3BhY2l0eVwiLCBvcGFjaXR5KTtcclxuICAgICAgICBmaWx0ZXJUZXh0LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZmlsdGVyX2dsb3dfdGV4dFwiKTtcclxuICAgICAgICB0ZXh0U3ZnLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRlZnMsIHRleHRTdmcpO1xyXG4gICAgICAgIHRleHRTdmcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZmlsdGVyVGV4dCwgdGV4dFN2Zyk7XHJcbiAgICB9LFxyXG4gICAgZ2V0R2xvd0ZpbHRlcjogZnVuY3Rpb24oaWQsIHN0ZERldmlhdGlvbil7XHJcbiAgICAgICAgcmV0dXJuIGBcclxuICAgICAgICAgICAgPGZpbHRlciBpZD1cIiR7aWR9XCIgeD1cIi0zMCVcIiB5PVwiLTMwJVwiIHdpZHRoPVwiMTYwJVwiIGhlaWdodD1cIjE2MCVcIj5cclxuICAgICAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249XCIke3N0ZERldmlhdGlvbn1cIiByZXN1bHQ9XCJnbG93XCIvPlxyXG4gICAgICAgICAgICAgICAgPGZlTWVyZ2U+XHJcbiAgICAgICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPVwiZ2xvd1wiLz5cclxuICAgICAgICAgICAgICAgICAgICA8ZmVNZXJnZU5vZGUgaW49XCJnbG93XCIvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj1cImdsb3dcIi8+XHJcbiAgICAgICAgICAgICAgICA8L2ZlTWVyZ2U+XHJcbiAgICAgICAgICAgIDwvZmlsdGVyPmA7XHJcbiAgICB9LFxyXG4gICAgc2hhZG93OiBmdW5jdGlvbih0ZXh0U3ZnLCBvcHQpe1xyXG4gICAgICAgIFtdLmZvckVhY2guY2FsbCh0ZXh0U3ZnLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbCgnLmZpbHRlcl9zaGFkb3dfdGV4dCwuZmlsdGVyX3NoYWRvd19kZWZzJyksIGZ1bmN0aW9uKGYpe1xyXG4gICAgICAgICAgICBmLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmKE9iamVjdC5rZXlzKG9wdCkubGVuZ3RoID09PSAwKXJldHVybjtcclxuICAgICAgICB2YXIgY29sb3IgPSBvcHQuY29sb3IgfHwgXCIjMDAwXCIsXHJcbiAgICAgICAgICAgIG9wYWNpdHkgPSBvcHQub3BhY2l0eSB8fCAxLFxyXG4gICAgICAgICAgICBzdGREZXZpYXRpb24gPSBvcHQuYmx1ciB8fCA0LFxyXG4gICAgICAgICAgICBkaXN0YW5jZSA9IG9wdC5kaXN0YW5jZSB8fCAwLFxyXG4gICAgICAgICAgICBhbmdsZSA9IG9wdC5hbmdsZSB8fCAwLFxyXG4gICAgICAgICAgICBmaWx0ZXJUZXh0ID0gdGV4dFN2Zy5jbG9uZU5vZGUodHJ1ZSksXHJcbiAgICAgICAgICAgIGlkID0gTWF0aC5yYW5kb20oKS50b0ZpeGVkKDEwKS5zbGljZSgtMTApLFxyXG4gICAgICAgICAgICBkZWZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFNWR19OUywgXCJkZWZzXCIpO1xyXG4gICAgICAgIGRlZnMuc2V0QXR0cmlidXRlKFwiaWRcIiwgYGRlZnNfc2hhZG93XyR7aWR9YCk7XHJcbiAgICAgICAgZGVmcy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImZpbHRlcl9zaGFkb3dfZGVmc1wiKTtcclxuICAgICAgICBkZWZzLmlubmVySFRNTCA9IHRoaXMuZ2V0U2hhZG93RmlsdGVyKGBmaWx0ZXJfc2hhZG93XyR7aWR9YCwgc3RkRGV2aWF0aW9uLCBkaXN0YW5jZSk7XHJcbiAgICAgICAgZmlsdGVyVGV4dC5zZXRBdHRyaWJ1dGUoXCJmaWx0ZXJcIiwgYHVybCgjZmlsdGVyX3NoYWRvd18ke2lkfSlgKTtcclxuICAgICAgICBmaWx0ZXJUZXh0LnNldEF0dHJpYnV0ZShcImZpbGxcIiwgY29sb3IpO1xyXG4gICAgICAgIGZpbHRlclRleHQuc2V0QXR0cmlidXRlKFwib3BhY2l0eVwiLCBvcGFjaXR5KTtcclxuICAgICAgICBmaWx0ZXJUZXh0LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZmlsdGVyX3NoYWRvd190ZXh0XCIpO1xyXG4gICAgICAgIHRleHRTdmcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZGVmcywgdGV4dFN2Zyk7XHJcbiAgICAgICAgdGV4dFN2Zy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShmaWx0ZXJUZXh0LCB0ZXh0U3ZnKTtcclxuICAgIH0sXHJcbiAgICBnZXRTaGFkb3dGaWx0ZXI6IGZ1bmN0aW9uKGlkLCBzdGREZXZpYXRpb24sIGRpc3RhbmNlKXtcclxuICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICA8ZmlsdGVyIGlkPVwiJHtpZH1cIiB4PVwiLTMwJVwiIHk9XCItMzAlXCIgd2lkdGg9XCIxNjAlXCIgaGVpZ2h0PVwiMTYwJVwiPlxyXG4gICAgICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj1cIiR7c3RkRGV2aWF0aW9ufVwiIHJlc3VsdD1cInNoYWRvd1wiLz5cclxuICAgICAgICAgICAgICAgIDxmZU9mZnNldCBkeD1cIiR7ZGlzdGFuY2V9XCIgZHk9XCIke2Rpc3RhbmNlfVwiLz5cclxuICAgICAgICAgICAgPC9maWx0ZXI+YDtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBUZXh0RWZmZWN0OyJdfQ==
